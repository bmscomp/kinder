# Corporate Proxy Configuration
# Copy this file to proxy.env and configure your proxy settings

# ============================================================================
# OPTION 1: Direct Corporate Proxy (Basic/Digest Auth)
# ============================================================================
# Use this if your proxy supports basic authentication
#HTTP_PROXY=http://proxy.company.com:8080
#http_proxy=http://proxy.company.com:8080
#HTTPS_PROXY=http://proxy.company.com:8080
#https_proxy=http://proxy.company.com:8080

# ============================================================================
# OPTION 2: CNTLM Gateway Mode (NTLM Authentication)
# ============================================================================
# Use this if your corporate proxy requires NTLM authentication
# CNTLM runs on your host and handles NTLM authentication
# Point to Docker bridge IP (docker0 interface) where CNTLM listens

# Docker bridge IP (usually 172.17.0.1 for docker0 interface)
# Find your docker0 IP with:
#   macOS: docker network inspect bridge | grep Gateway
#   Linux: ip addr show docker0 | grep inet
#   Both:  docker run --rm alpine ip route | grep default | awk '{print $3}'
HTTP_PROXY=http://172.17.0.1:3128
http_proxy=http://172.17.0.1:3128
HTTPS_PROXY=http://172.17.0.1:3128
https_proxy=http://172.17.0.1:3128

# FTP Proxy (optional)
#FTP_PROXY=http://172.17.0.1:3128
#ftp_proxy=http://172.17.0.1:3128

# No Proxy - Addresses that should bypass the proxy
# Include: localhost, cluster IPs, internal networks, Docker networks
# Important: Include Docker bridge network (172.17.*) to avoid proxy loops
NO_PROXY=localhost,127.0.0.1,127.0.0.*,172.17.*,.local,.svc,.cluster.local,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16,10.96.0.0/12,10.244.0.0/16
no_proxy=localhost,127.0.0.1,127.0.0.*,172.17.*,.local,.svc,.cluster.local,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16,10.96.0.0/12,10.244.0.0/16

# ============================================================================
# Proxy Authentication (for OPTION 1 only)
# ============================================================================
# Uncomment and configure if your proxy requires basic authentication
# NOT needed for CNTLM (OPTION 2) - CNTLM handles authentication
#PROXY_USER=username
#PROXY_PASS=password

# ============================================================================
# NOTES:
# ============================================================================
# - For CNTLM setup, see: proxy/CNTLM_SETUP.md
# - Ensure CNTLM is running in gateway mode (listening on all interfaces)
# - Verify docker0 IP: ip addr show docker0 | grep "inet "
# - Test connectivity: docker run --rm alpine ping -c 2 172.17.0.1



# Test Corporate Proxy Configuration (NO AUTHENTICATION)
# Generated by setup-test-proxy.sh
# Note: Using host.docker.internal to reach host from Kind containers

HTTP_PROXY=http://host.docker.internal:3128
http_proxy=http://host.docker.internal:3128
HTTPS_PROXY=http://host.docker.internal:3128
https_proxy=http://host.docker.internal:3128

NO_PROXY=localhost,127.0.0.1,127.0.0.*,172.17.*,.local,.svc,.cluster.local,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16,10.96.0.0/12,10.244.0.0/16
no_proxy=localhost,127.0.0.1,127.0.0.*,172.17.*,.local,.svc,.cluster.local,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16,10.96.0.0/12,10.244.0.0/16
